$(function(){var f=$(".datatables-ajax"),h=$(".dt-column-search"),p=$(".dt-column-search-1"),b=$(".dt-column-search-2"),i=$(".dt-advanced-search"),g=$(".dt-responsive"),y=$(".start_date"),v=$(".end_date"),u=$(".flatpickr-range"),_="MM/DD/YYYY";u.length&&u.flatpickr({mode:"range",dateFormat:"m/d/Y",orientation:isRtl?"auto right":"auto left",locale:{format:_},onClose:function(e,t,n){var a="",r=new Date;e[0]!=null&&(a=moment(e[0]).format("MM/DD/YYYY"),y.val(a)),e[1]!=null&&(r=moment(e[1]).format("MM/DD/YYYY"),v.val(r)),$(u).trigger("change").trigger("keyup")}});function w(e,t){if(e==5){var n=y.val(),a=v.val();n!==""&&a!==""&&($.fn.dataTableExt.afnFiltering.length=0,i.dataTable().fnDraw(),D(e,n,a)),i.dataTable().fnDraw()}else i.DataTable().column(e).search(t,!1,!0).draw()}$.fn.dataTableExt.afnFiltering.length=0;var D=function(e,t,n){$.fn.dataTableExt.afnFiltering.push(function(a,r,s){var l=m(r[e]),o=m(t),c=m(n);return o<=l&&l<=c||l>=o&&c===""&&o!==""?!0:l<=c&&o===""&&c!==""})},m=function(e){var t=new Date(e),n=t.getFullYear()+""+("0"+(t.getMonth()+1)).slice(-2)+("0"+t.getDate()).slice(-2);return n};if(f.length&&f.dataTable({processing:!0,ajax:assetsPath+"json/ajax.php",dom:'<"row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6 d-flex justify-content-center justify-content-md-end"f>><"table-responsive"t><"row"<"col-sm-12 col-md-6"i><"col-sm-12 col-md-6"p>>'}),h.length){$(".dt-column-search thead tr").clone(!0).appendTo(".dt-column-search thead"),$(".dt-column-search thead tr:eq(1) th").each(function(e){var t=$(this).text(),n=$('<input type="text" class="form-control" placeholder="Search '+t+'" />');$(this).css("border-left","none"),e===$(".dt-column-search thead tr:eq(1) th").length-1&&$(this).css("border-right","none"),$(this).html(n),$("input",this).on("keyup change",function(){d.column(e).search()!==this.value&&d.column(e).search(this.value).draw()})});var d=h.DataTable({ajax:assetsPath+"json/table-datatable.json",columns:[{data:"id"},{data:null,render:function(e,t,n){return e.start_date+", "+e.start_time}},{data:null,render:function(e,t,n){const a=new Date,s=new Date(e.start_date.trim()+"T"+e.start_time)-a,l=Math.floor(s/1e3/60/60),o=Math.floor(l/24);if(o>0)return`${o} days`;if(l>=1)return`${l} hours`;if(l>0&&l<1)return"Now";if(l<=0)return"Past"}},{data:null,render:function(e,t,n){return e.first_name+" "+e.last_name}},{data:"status"},{data:"payment_status"},{data:null,render:function(e,t,n){return j(e.created_at)}}],orderCellsTop:!0,dom:'<"row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6 d-flex justify-content-center justify-content-md-end"f>><"table-responsive"t><"row"<"col-sm-12 col-md-6"i><"col-sm-12 col-md-6"p>>'})}function j(e){const t=new Date(e),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r=t.getDate(),s=t.getFullYear();let l=t.getHours();const o=t.getMinutes(),c=l>=12?"PM":"AM";l=l%12,l=l||12;const x=o<10?"0"+o:o;return`${a} ${r}, ${s} ${l}:${x} ${c}`}if(p.length){$(".dt-column-search-1 thead tr").clone(!0).appendTo(".dt-column-search-1 thead"),$(".dt-column-search-1 thead tr:eq(1) th").each(function(t){var n=$(this).text(),a=$('<input type="text" class="form-control" placeholder="Search '+n+'" />');$(this).css("border-left","none"),t===$(".dt-column-search-1 thead tr:eq(1) th").length-1&&$(this).css("border-right","none"),$(this).html(a),$("input",this).on("keyup change",function(){d.column(t).search()!==this.value&&d.column(t).search(this.value).draw()})});var d=p.DataTable({ajax:assetsPath+"json/table-datatable1.json",columns:[{data:"id"},{data:"token"},{data:"booking_id"},{data:"customer_id"},{data:"processor"},{data:"payment_method"},{data:"amount"},{data:"status"},{data:"funds_status"},{data:"created_at",render:function(t,n,a){var r=new Date(t).toLocaleDateString("en-US");return r}}],orderCellsTop:!0,dom:'<"row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6 d-flex justify-content-center justify-content-md-end"f>><"table-responsive"t><"row"<"col-sm-12 col-md-6"i><"col-sm-12 col-md-6"p>>'})}if(b.length){$(".dt-column-search-2 thead tr").clone(!0).appendTo(".dt-column-search-2 thead"),$(".dt-column-search-2 thead tr:eq(1) th").each(function(t){var n=$(this).text(),a=$('<input type="text" class="form-control" placeholder="Search '+n+'" />');$(this).css("border-left","none"),t===$(".dt-column-search-2 thead tr:eq(1) th").length-1&&$(this).css("border-right","none"),$(this).html(a),$("input",this).on("keyup change",function(){d.column(t).search()!==this.value&&d.column(t).search(this.value).draw()})});var d=b.DataTable({ajax:assetsPath+"json/table-datatable2.json",columns:[{data:"id"},{data:null,render:function(t,n,a){return a.first_name+" "+a.last_name}},{data:null,render:function(t,n,a){return a.phone?a.phone:null}},{data:"email"},{data:null,render:function(t,n,a){return"0"}},{data:null,render:function(t,n,a){return"n/a"}},{data:null,render:function(t,n,a){return"Past"}},{data:"user_id"},{data:"created_at",render:function(t,n,a){var r=new Date(t).toLocaleDateString("en-US");return r}},{data:null,render:function(t,n,a){var r="/edit_customer/"+a.id;return'<a href="'+r+'">Edit</a>'}}],orderCellsTop:!0,dom:'<"row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6 d-flex justify-content-center justify-content-md-end"f>><"table-responsive"t><"row"<"col-sm-12 col-md-6"i><"col-sm-12 col-md-6"p>>'})}i.length&&i.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-6'i><'col-sm-12 col-md-6 dataTables_pager'p>>",ajax:assetsPath+"json/table-datatable.json",columns:[{data:""},{data:"full_name"},{data:"email"},{data:"post"},{data:"city"},{data:"start_date"},{data:"salary"}],columnDefs:[{className:"control",orderable:!1,targets:0,render:function(e,t,n,a){return""}}],orderCellsTop:!0,responsive:{details:{display:$.fn.dataTable.Responsive.display.modal({header:function(e){var t=e.data();return"Details of "+t.full_name}}),type:"column",renderer:function(e,t,n){var a=$.map(n,function(r,s){return r.title!==""?'<tr data-dt-row="'+r.rowIndex+'" data-dt-column="'+r.columnIndex+'"><td>'+r.title+":</td> <td>"+r.data+"</td></tr>":""}).join("");return a?$('<table class="table"/><tbody />').append(a):!1}}}}),$("input.dt-input").on("keyup",function(){w($(this).attr("data-column"),$(this).val())}),g.length&&g.DataTable({ajax:assetsPath+"json/table-datatable.json",columns:[{data:""},{data:"full_name"},{data:"email"},{data:"post"},{data:"city"},{data:"start_date"},{data:"salary"},{data:"age"},{data:"experience"},{data:"status"}],columnDefs:[{className:"control",orderable:!1,targets:0,searchable:!1,render:function(e,t,n,a){return""}},{targets:-1,render:function(e,t,n,a){var r=n.status,s={1:{title:"Current",class:"bg-label-primary"},2:{title:"Professional",class:" bg-label-success"},3:{title:"Rejected",class:" bg-label-danger"},4:{title:"Resigned",class:" bg-label-warning"},5:{title:"Applied",class:" bg-label-info"}};return typeof s[r]>"u"?e:'<span class="badge rounded-pill '+s[r].class+'">'+s[r].title+"</span>"}}],destroy:!0,dom:'<"row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6 d-flex justify-content-center justify-content-md-end"f>>t<"row"<"col-sm-12 col-md-6"i><"col-sm-12 col-md-6"p>>',responsive:{details:{display:$.fn.dataTable.Responsive.display.modal({header:function(e){var t=e.data();return"Details of "+t.full_name}}),type:"column",renderer:function(e,t,n){var a=$.map(n,function(r,s){return r.title!==""?'<tr data-dt-row="'+r.rowIndex+'" data-dt-column="'+r.columnIndex+'"><td>'+r.title+":</td> <td>"+r.data+"</td></tr>":""}).join("");return a?$('<table class="table"/><tbody />').append(a):!1}}}}),setTimeout(()=>{$(".dataTables_filter .form-control").removeClass("form-control-sm"),$(".dataTables_length .form-select").removeClass("form-select-sm")},200)});
